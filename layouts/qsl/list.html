{{ define "main" }}
  <header class="mt-5 max-w-prose">
    <h1 class="text-3xl font-bold">{{ .Title }}</h1>
    {{ with .Params.description }}
      <p class="mt-3 opacity-80">{{ . }}</p>
    {{ end }}
  </header>

  <section class="mt-10">
    <div class="qsl-grid">
      {{ range .Pages.ByTitle }}
        {{ $imgs := .Resources.Match "*.{jpg,jpeg,png,webp}" }}
        {{ if lt (len $imgs) 1 }}
          {{ continue }}
        {{ end }}

        {{ $front := .Resources.GetMatch "*front*" }}
        {{ if not $front }}
          {{ $front = index $imgs 0 }}
        {{ end }}

        {{ $galleryID := printf "qsl-%s" .RelPermalink | urlize }}

        <div class="qsl-item">
          <a href="{{ $front.RelPermalink }}" class="glightbox" data-gallery="{{ $galleryID }}" data-title="{{ .Title }}">
            <img src="{{ $front.RelPermalink }}" loading="lazy" alt="{{ .Title }} QSL front">
          </a>

          {{ range $imgs }}
            {{ if ne .RelPermalink $front.RelPermalink }}
              <a href="{{ .RelPermalink }}" class="glightbox" data-gallery="{{ $galleryID }}" data-title="{{ $.Title }}" style="display:none;"></a>
            {{ end }}
          {{ end }}

          <div class="qsl-caption">{{ .Title }}</div>
        </div>
      {{ end }}
    </div>
  </section>
{{ end }}
