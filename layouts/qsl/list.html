{{ define "main" }}
  <header class="mt-5 max-w-prose">
    <h1 class="text-3xl font-bold">{{ .Title }}</h1>
    {{ with .Params.description }}
      <p class="mt-3 opacity-80">{{ . }}</p>
    {{ end }}
  </header>

  <section class="mt-10">
    <div class="qsl-grid">
      {{ range .Pages.ByTitle }}
        {{ $imgs := .Resources.Match "*.{jpg,jpeg,png,webp}" }}
        {{ if lt (len $imgs) 1 }}{{ continue }}{{ end }}

        {{ $front := .Resources.GetMatch "*front*" }}
        {{ $back  := .Resources.GetMatch "*back*" }}

        {{ if not $front }}{{ $front = index $imgs 0 }}{{ end }}
        {{ if not $back }}
          {{ if ge (len $imgs) 2 }}{{ $back = index $imgs 1 }}{{ end }}
        {{ end }}

        <div class="qsl-card">
          <div class="qsl-imgwrap">
            {{ if $front }}
              <img src="{{ $front.RelPermalink }}" loading="lazy" alt="{{ .Title }} QSL front">
            {{ end }}
          </div>

          <div class="qsl-imgwrap">
            {{ if $back }}
              <img src="{{ $back.RelPermalink }}" loading="lazy" alt="{{ .Title }} QSL back">
            {{ end }}
          </div>

          <div class="qsl-caption">{{ .Title }}</div>
        </div>
      {{ end }}
    </div>
  </section>
{{ end }}
